# Gitとガバナンス

このガイドでは、共同執筆のためのGit運用とガバナンスについて解説します。適切なブランチ管理とPull Requestのワークフローを理解することで、複数人での論文執筆を効率的に進めることができます。

## Gitの基本概念

Gitは分散型バージョン管理システムで、以下の特徴があります：

- **バージョン管理**: 文書の変更履歴を追跡できます
- **ブランチ機能**: 複数の作業を並行して進められます
- **マージ機能**: 異なるブランチの変更を統合できます
- **コラボレーション**: 複数人での共同作業を可能にします

## ブランチ戦略

このリポジトリでは、以下のブランチ戦略を採用しています：

- **main**: 公開されている安定版のブランチ
- **feature/XXX**: 新機能や改善を開発するためのブランチ
- **fix/XXX**: バグ修正のためのブランチ

### Protected main

`main`ブランチは保護されており、直接プッシュすることはできません。すべての変更はPull Requestを通じて行う必要があります。

## Pull Requestワークフロー

論文執筆や機能追加のための基本的なワークフローは以下の通りです：

1. **ブランチの作成**: 作業内容に応じた名前のブランチを作成します
2. **変更の実施**: 必要な変更を行います
3. **コミット**: 変更をコミットします
4. **プッシュ**: リモートリポジトリにプッシュします
5. **Pull Request作成**: 変更内容を説明するPull Requestを作成します
6. **レビュー**: 他のメンバーによるレビューを受けます
7. **マージ**: レビューが完了したらmainブランチにマージします

### Pull Requestテンプレート

Pull Requestを作成する際は、`.github/PULL_REQUEST_TEMPLATE.md`のテンプレートに従って必要な情報を記入してください。テンプレートには以下の項目が含まれています：

- 変更内容
- 変更理由
- 確認事項
- スクリーンショット
- 追加情報

## GitHub Desktopでの操作

コマンドラインが苦手な方は、GitHub Desktopを使用することで、GUIでGit操作を行うことができます。

### ブランチの作成

1. GitHub Desktopを開く
2. 「Current Branch」をクリック
3. 「New Branch」ボタンをクリック
4. ブランチ名を入力して「Create Branch」をクリック

### 変更のコミットとプッシュ

1. 変更したファイルを確認
2. コミットメッセージを入力
3. 「Commit to [ブランチ名]」ボタンをクリック
4. 「Push origin」ボタンをクリック

### Pull Requestの作成

1. 「Branch」メニューから「Create Pull Request」を選択
2. Pull Requestの内容を入力
3. 「Create Pull Request」ボタンをクリック

## コードオーナーシップ

`.github/CODEOWNERS`ファイルでは、特定のファイルやディレクトリの「オーナー」を指定しています。オーナーに指定されたユーザーは、該当するファイルが変更されたPull Requestのレビューを自動的に依頼されます。

例：
```
# テンプレートファイルのオーナー
/templates/ @username1 @username2

# ドキュメントのオーナー
/docs/ @username3
```

## CIワークフロー

GitHub Actionsを使用して、以下の自動チェックを実施しています：

1. **markdownlint**: Markdownの文法チェック
2. **Vale**: 表現のチェック
3. **pandoc build**: ドキュメントのビルド
4. **artifact**: ビルドされたdocxファイルの保存

これらのチェックがすべて通過しないと、Pull Requestをマージすることはできません。

## 自動チェック機能

リポジトリには自動チェック機能が設定されており、コミット前に以下のチェックを自動的に実行します：

- markdownlint: Markdownの文法チェック
- trailing-whitespace: 行末の余分な空白のチェック

これらのチェックは、GitHub Desktopでコミットする際にも自動的に実行されます。エラーが発生した場合は、指摘された問題を修正してから再度コミットしてください。

## 次のステップ

Gitとガバナンスの基本を理解したら、[README.md](../README.md)に戻り、実際に論文執筆を始めましょう。
